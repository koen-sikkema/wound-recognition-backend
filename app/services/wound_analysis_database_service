from sqlalchemy.orm     import Session
from fastapi            import FastAPI, Depends
from sqlalchemy.orm     import Session
from core.database      import get_database, close_database
from core.models        import WoundAnalysis


app = FastAPI()


@app.get("/analysis/{analysis_id}")
async def get_wound_image(analysis_id: int, db: Session = Depends(get_database)):
    analysis = db.query(WoundAnalysis).filter(WoundAnalysis.analysis_id == analysis_id).first()
    if analysis:
        return analysis
    Depends(close_database)
    return {"message": "Analysis not found"}
